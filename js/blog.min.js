(()=>{var i="yDLol9DLwFeUUgsyYx3rcQtt",s="https://api.storyblok.com/v2/cdn",c="published",d=9,o=3,n=3e5,b={"Frank Penney":{image:"images/attorneys/frank-penney.webp",title:"Founding Attorney"},"Jacob Stoeltzing":{image:"images/attorneys/jacob-stoeltzing.webp",title:"Attorney"},"Joshua Boyce":{image:"images/attorneys/joshua-boyce.webp",title:"Attorney"},"Mark McCauley":{image:"images/attorneys/mark-mccauley.webp",title:"Attorney"},"Guest Author":{image:"images/logos/frank-penney-logo.webp",title:""}},r=["Car Accidents","Truck Accidents","Personal Injury","Insurance Claims","Legal Tips","Community","Firm News"],g=1,l="all",u="",m="",p=1,h=null;function f(e){var t;return e?((t=document.createElement("div")).appendChild(document.createTextNode(e)),t.innerHTML):""}function y(e){return!e||(e=e.replace(" ","T"),e=new Date(e),isNaN(e.getTime()))?"":["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}function v(e){return e&&e.content?(e=t(e).split(/\s+/).filter(function(e){return 0<e.length}).length,e=Math.ceil(e/200),Math.max(1,e)):1}function t(e){return e?"text"===e.type?e.text||"":e.content?e.content.map(t).join(" "):"":""}function w(e){try{var t,a=sessionStorage.getItem(e);return a?(t=JSON.parse(a),Date.now()-t.timestamp>n?(sessionStorage.removeItem(e),null):t.data):null}catch(e){return null}}function k(e,t){try{sessionStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now()}))}catch(e){}}function _(e){var t,a={token:i,version:c,starts_with:"blog/",sort_by:"content.publish_date:desc",per_page:d,page:1,is_startpage:!1},n={};for(t in a)a.hasOwnProperty(t)&&(n[t]=a[t]);for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var o=Object.keys(n).filter(function(e){return""!==n[e]&&void 0!==n[e]}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),r=s+"/stories?"+o,l="sb_"+o,o=w(l);return o?Promise.resolve(o):fetch(r).then(function(e){var t;if(e.ok)return t=parseInt(e.headers.get("Total"),10)||0,e.json().then(function(e){e={stories:e.stories,total:t,perPage:n.per_page};return k(l,e),e});throw new Error("Storyblok API error: "+e.status)})}function I(e){if(!e)return"";switch(e.type){case"paragraph":var t=E(e);return t?"<p>"+t+"</p>":"";case"heading":t=e.attrs&&e.attrs.level||2;return"<h"+t+">"+E(e)+"</h"+t+">";case"bullet_list":return"<ul>"+E(e)+"</ul>";case"ordered_list":return"<ol>"+E(e)+"</ol>";case"list_item":return"<li>"+E(e)+"</li>";case"blockquote":return"<blockquote>"+E(e)+"</blockquote>";case"code_block":return"<pre><code>"+E(e)+"</code></pre>";case"horizontal_rule":return"<hr>";case"image":var t=e.attrs&&e.attrs.src||"",a=e.attrs&&e.attrs.alt||"";return'<figure class="blog-content-image"><img src="'+f(t)+'" alt="'+f(a)+'" loading="lazy"><figcaption>'+f(a)+"</figcaption></figure>";case"text":var o=f(e.text||"");return e.marks&&e.marks.forEach(function(e){switch(e.type){case"bold":o="<strong>"+o+"</strong>";break;case"italic":o="<em>"+o+"</em>";break;case"underline":o="<u>"+o+"</u>";break;case"strike":o="<s>"+o+"</s>";break;case"link":var t=e.attrs&&e.attrs.href||"#",a=e.attrs&&e.attrs.target||"_self",n="_blank"===a?' rel="noopener noreferrer"':"";o='<a href="'+f(t)+'" target="'+a+'"'+n+">"+o+"</a>";break;case"code":o="<code>"+o+"</code>"}}),o;case"hard_break":return"<br>";default:return E(e)}}function E(e){return e.content?e.content.map(I).join(""):""}function A(e){var t=e.content,a=v(t.body),n=(t.categories||[]).filter(function(e){return e&&e.trim()}),o=t.featured_image&&t.featured_image.filename?t.featured_image.filename+"/m/600x400":"images/favicon/Frank-Penny-Favicon-Logo-600x315-1.png",r=t.featured_image_alt||t.title||"",n=n.map(function(e){return'<span class="blog-card-category">'+f(e)+"</span>"}).join("");return'<a href="/blog/'+f(e.slug)+'" class="card blog-card" aria-label="Read: '+f(t.title)+'"><div class="card-image"><img src="'+f(o)+'" alt="'+f(r)+'" width="600" height="400" loading="lazy"></div><div class="blog-card-body"><div class="blog-card-meta"><time datetime="'+(t.publish_date||"")+'">'+y(t.publish_date)+'</time><span class="blog-card-read-time">'+a+" min read</span></div>"+(n?'<div class="blog-card-categories">'+n+"</div>":"")+'<h3 class="blog-card-title">'+f(t.title)+'</h3><p class="blog-card-excerpt">'+f(t.excerpt||"")+'</p><span class="blog-card-read-more">Read Article</span></div></a>'}function x(){var e=document.getElementById("blog-clear-tag");e&&e.addEventListener("click",function(){u="",document.getElementById("blog-active-tag").setAttribute("hidden",""),g=1,L()});var t,a,e=new URLSearchParams(window.location.search).get("tag");e&&(e=u=e,t=document.getElementById("blog-active-tag"),a=document.getElementById("blog-active-tag-name"),t)&&a&&(a.textContent=e,t.removeAttribute("hidden"))}function L(){var e={page:g,per_page:d},t=(l&&"all"!==l&&(e["filter_query[categories][in]"]=l),u&&(e.with_tag=u),m&&(e.search_term=m),document.getElementById("blog-loading")),a=document.getElementById("blog-posts-grid"),n=document.getElementById("blog-error"),o=document.getElementById("blog-empty");t&&(t.style.display=""),a&&(a.style.display="none"),n&&n.setAttribute("hidden",""),o&&o.setAttribute("hidden",""),_(e).then(function(e){t=e.stories,r=document.getElementById("blog-posts-grid"),a=document.getElementById("blog-loading"),n=document.getElementById("blog-empty"),r&&(a&&(a.style.display="none"),0===t.length?(r.style.display="none",n&&n.removeAttribute("hidden")):(n&&n.setAttribute("hidden",""),r.style.display="",r.innerHTML=t.map(A).join("")));var t,a=e.total,n=e.perPage,o=g,r=document.getElementById("blog-pagination");if(r)if((p=Math.ceil(a/n))<=1)r.setAttribute("hidden","");else{r.removeAttribute("hidden");a=r.querySelector(".blog-pagination-inner");if(a){var l="",n=(l+='<button class="blog-page-btn" data-page="'+(o-1)+'"'+(o<=1?' disabled aria-disabled="true"':"")+' aria-label="Previous page">Previous</button>',Math.max(1,o-2)),i=Math.min(p,o+2);1<n&&(l+='<button class="blog-page-btn" data-page="1" aria-label="Page 1">1</button>',2<n)&&(l+='<span class="blog-page-ellipsis">&hellip;</span>');for(var s=n;s<=i;s++)l+='<button class="blog-page-btn'+(s===o?" active":"")+'" data-page="'+s+'" aria-label="Page '+s+'"'+(s===o?' aria-current="page"':"")+">"+s+"</button>";i<p&&(i<p-1&&(l+='<span class="blog-page-ellipsis">&hellip;</span>'),l+='<button class="blog-page-btn" data-page="'+p+'" aria-label="Page '+p+'">'+p+"</button>"),l+='<button class="blog-page-btn" data-page="'+(o+1)+'"'+(p<=o?' disabled aria-disabled="true"':"")+' aria-label="Next page">Next</button>',a.innerHTML=l,a.querySelectorAll(".blog-page-btn:not([disabled])").forEach(function(e){e.addEventListener("click",function(){g=parseInt(this.getAttribute("data-page"),10),L();var e,t=document.querySelector(".blog-posts-section");t&&(e=window.matchMedia("(prefers-reduced-motion: reduce)").matches,t.scrollIntoView({behavior:e?"auto":"smooth"}))})})}}}).catch(function(e){console.error("Failed to load blog posts:",e),t&&(t.style.display="none"),n&&n.removeAttribute("hidden")})}function a(){var t,a,e;(a=document.querySelector(".blog-category-filters"))&&(t='<button class="blog-filter-btn active" data-category="all">All</button>',r.forEach(function(e){t+='<button class="blog-filter-btn" data-category="'+f(e)+'">'+f(e)+"</button>"}),a.innerHTML=t,a.querySelectorAll(".blog-filter-btn").forEach(function(e){e.addEventListener("click",function(){a.querySelectorAll(".blog-filter-btn").forEach(function(e){e.classList.remove("active")}),this.classList.add("active"),l=this.getAttribute("data-category"),g=1,L()})})),(e=document.getElementById("blog-search-input"))&&e.addEventListener("input",function(){clearTimeout(h);var e=this.value.trim();h=setTimeout(function(){m=e,g=1,L()},400)}),x();var n=new URLSearchParams(window.location.search).get("category");n&&(l=n,document.querySelectorAll(".blog-filter-btn").forEach(function(e){e.classList.remove("active"),e.getAttribute("data-category")===n&&e.classList.add("active")})),L()}function P(e){var t=e.content,a=v(t.body),n=t.author||"Frank Penney",o=b[n]||b["Frank Penney"],r=(t.categories||[]).filter(function(e){return e&&e.trim()}),l=t.tags||e.tag_list||[],i=t.featured_image&&t.featured_image.filename?t.featured_image.filename+"/m/1200x630":"",s=t.featured_image_alt||t.title||"",c=(document.title=(t.meta_title||t.title)+" | Frank Penney Injury Law",document.querySelector('link[rel="canonical"]')),c=(c&&(c.href="https://www.penneylaw.com/blog/"+e.slug),document.getElementById("breadcrumb-post-title")),c=(c&&(c.textContent=t.title),r.map(function(e){return'<a href="/blog.html?category='+encodeURIComponent(e)+'" class="blog-post-category">'+f(e)+"</a>"}).join("")),r=l.map(function(e){return'<a href="/blog.html?tag='+encodeURIComponent(e)+'" class="blog-post-tag">'+f(e)+"</a>"}).join(""),l="https://www.penneylaw.com/blog/"+e.slug,e=encodeURIComponent(t.title),e='<div class="blog-share"><span class="blog-share-label">Share this article:</span><div class="blog-share-buttons"><a href="https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(l)+'" target="_blank" rel="noopener noreferrer" class="blog-share-btn blog-share-facebook" aria-label="Share on Facebook">Facebook</a><a href="https://twitter.com/intent/tweet?url='+encodeURIComponent(l)+"&text="+e+'" target="_blank" rel="noopener noreferrer" class="blog-share-btn blog-share-twitter" aria-label="Share on X (Twitter)">X</a><a href="https://www.linkedin.com/sharing/share-offsite/?url='+encodeURIComponent(l)+'" target="_blank" rel="noopener noreferrer" class="blog-share-btn blog-share-linkedin" aria-label="Share on LinkedIn">LinkedIn</a><a href="mailto:?subject='+e+"&body="+encodeURIComponent(l)+'" class="blog-share-btn blog-share-email" aria-label="Share via email">Email</a></div></div>',d=(d=t.body)&&d.content?d.content.map(I).join(""):"",g=document.getElementById("blog-post-content"),u=document.getElementById("blog-post-loading"),u=(u&&(u.style.display="none"),'<div class="container blog-post-layout"><div class="blog-post-main"><header class="blog-post-header">'+(c?'<div class="blog-post-categories">'+c+"</div>":"")+'<h1 class="blog-post-title">'+f(t.title)+'</h1><div class="blog-post-meta"><div class="blog-post-author"><img src="'+f(o.image)+'" alt="'+f(n)+'" class="blog-author-avatar" width="44" height="44" loading="lazy"><div class="blog-author-info"><span class="blog-author-name">'+f(n)+"</span>"+(o.title?'<span class="blog-author-title">'+f(o.title)+"</span>":"")+'</div></div><div class="blog-post-meta-details"><time datetime="'+(t.publish_date||"")+'">'+y(t.publish_date)+'</time><span class="blog-post-read-time">'+a+" min read</span></div></div></header>"+(i?'<figure class="blog-post-featured-image"><img src="'+f(i)+'" alt="'+f(s)+'" width="1200" height="630"></figure>':"")+'<div class="blog-post-body">'+d+"</div>"+(r?'<div class="blog-post-tags"><span class="blog-tags-label">Tags:</span>'+r+"</div>":"")+e+'</div><aside class="blog-post-sidebar" aria-label="Article sidebar"><div class="blog-sidebar-cta"><h3>Injured in an Accident?</h3><p>Get a free consultation from our experienced attorneys.</p><a href="/contact.html" class="btn btn-primary btn-full">Bank on Frank</a><a href="tel:8888880566" class="btn btn-outline btn-full">Call (888) 888-0566</a></div></aside></div>'),c=(g.innerHTML=u,{"@context":"https://schema.org","@type":"BlogPosting",headline:t.title,description:t.excerpt||"",image:i||"https://www.penneylaw.com/images/favicon/Frank-Penny-Favicon-Logo-600x315-1.png",author:{"@type":"Person",name:n},publisher:{"@type":"Organization",name:"Frank Penney Injury Law",logo:{"@type":"ImageObject",url:"https://www.penneylaw.com/images/logos/frank-penney-logo.webp"}},datePublished:t.publish_date||"",mainEntityOfPage:{"@type":"WebPage","@id":l}}),o=document.createElement("script");o.type="application/ld+json",o.textContent=JSON.stringify(c),document.head.appendChild(o)}function S(){var e,t,a,n=window.location.pathname.replace(/^\//,"").replace(/\/$/,"");n&&"blog"!==n&&"blog-post"!==n&&"blog-post.html"!==n?(t=s+"/stories/"+(e=n)+"?token="+i+"&version="+c,((e=w(a="sb_story_"+n))?Promise.resolve(e):fetch(t).then(function(e){if(e.ok)return e.json();throw new Error("Story not found: "+e.status)}).then(function(e){return k(a,e.story),e.story})).then(function(e){var n;P(e),0!==(e=((n=e).content.categories||[]).filter(function(e){return e&&e.trim()})).length&&_({per_page:o+1,"filter_query[categories][in]":e[0],excluding_slugs:n.full_slug}).then(function(e){var t,a,e=e.stories.filter(function(e){return e.uuid!==n.uuid}).slice(0,o);0!==e.length&&(t=document.getElementById("blog-related-posts"),a=document.getElementById("blog-related-grid"),t)&&a&&(t.removeAttribute("hidden"),a.innerHTML=e.map(A).join(""))}).catch(function(e){console.warn("Failed to load related posts:",e)})}).catch(function(e){console.error("Failed to load blog post:",e);var e=document.getElementById("blog-post-loading"),t=document.getElementById("blog-post-error");e&&(e.style.display="none"),t&&t.removeAttribute("hidden")})):window.location.href="/blog.html"}function e(){var e=window.location.pathname;-1!==e.indexOf("/blog.html")||"/blog"===e||"/blog/"===e?a():-1===e.indexOf("/blog/")&&-1===e.indexOf("/blog-post.html")||S()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})();